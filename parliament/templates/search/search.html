{% extends "base.html" %}
{% load thumbnail highlight %}
{% block breadcrumbs %}{{ block.super }} <a href="{% url parliament.core.views.search %}">Search</a> {{ query }}{% endblock %}

{% block content %}

    <form method="get" action=".">
        <table>
            {{ form.as_table }}
            <tr>
                <td>&nbsp;</td>
                <td>
                    <input type="submit" value="Search">
                </td>
            </tr>
        </table>
        {% if page.object_list %}
        <h2>Results {{ page.start_index }}-{{ page.end_index }} of {{ page.paginator.count }} for &ldquo;{{ query }}&rdquo;</h2>
        
            {% for result in page.object_list %}
            {% if result.model_name == 'politician' %}<div class="result statement">
                <div class="focus"><p><a href="{{ result.object.get_absolute_url }}">{{ result.pol_name }}</a> {{ result.descr }}</p></div></div>{% endif %}
            {% if result.model_name == 'statement' %}<div class="result statement">
                <div class="context"><p>{{ result.date|date:"F jS, Y"}}</p><p>{% if result.politician_id %}<a href="{% url politicians.views.politician pol_id=result.politician_id %}">{{ result.politician }}</a>{% else %}{{ result.politician }}{% endif %}{% if result.party %}<br><span class="tag partytag_{{ result.party|slugify }}">{{ result.party }}</span>{% endif %}</p></div>
                <div class="focus"><p><a href="{{ result.object.get_absolute_url }}">{{ result.topic }}</a> &nbsp;{% highlight result.descr with query %}</p></div>
                <div class="clear"></div>
                </div>
            {% endif %}
            {% if result.model_name == 'bill' %}<div class="result bill"><a href="{{ result.object.get_absolute_url }}">Bill {{ result.object.number }}</a> <span class="date">({{ result.object.session }})</span><p>{% highlight result.descr with query %}</p></div>{% endif %}
            {% endfor %}

        {% else %}
            <p>No results found.</p>
        {% endif %}
    </form>
{% endblock %}
{% block headextra %}
<style type="text/css">
.result .highlighted {
    background-color: yellow;
}
.result.statement .context, .result.statement .focus {
    min-height: 0;
}
.result.statement .focus {
    margin-bottom: 5px;
}
.result.statement {
    border: none;
    padding-top: 5px;
}
</style>
{% endblock headextra %}
