{% extends "base.html" %}
{% load thumbnail highlight %}
{% block breadcrumbs %}{{ block.super }} <a href="{% url parliament.core.views.search %}">Search</a> {{ query }}{% endblock %}

{% block content %}

    <form method="get" action=".">
        <table>
            {{ form.as_table }}
            <tr>
                <td>&nbsp;</td>
                <td>
                    <input type="submit" value="Search">
                </td>
            </tr>
        </table>
        {% if page.object_list %}
        <h2>Results {{ page.start_index }}-{{ page.end_index }} of {{ page.paginator.count }} for &ldquo;{{ query }}&rdquo;</h2>
        
            {% for result in page.object_list %}
            {% if result.model_name == 'politician' %}<p>{% if result.object.headshot %}<img src="{% thumbnail result.object.headshot 67x90 crop_first="28,20,68,20" %}">{% endif %}<a href="{{ result.object.get_absolute_url }}">{{ result.object.name }}</a></p>{% endif %}
            {% if result.model_name == 'statement' %}{% with result.object as statement %}<div class="result statement"><a href="{{ result.object.get_absolute_url }}">{{ statement.heading }} / {{ statement.topic }}</a> <span class="date">({{ statement.time|date:"F jS Y"}})</span>
                <p><span class="who">{{ statement.who }}</span> {% highlight statement.text with query %}</p>
                
                </div>
            {% endwith %}{% endif %}
            {% if result.model_name == 'bill' %}<div class="result bill"><a href="{{ result.object.get_absolute_url }}">Bill {{ result.object.number }}</a> <span class="date">({{ result.object.session }})</span><p>{% highlight result.text with query %}</p></div>{% endif %}
            {% endfor %}

        {% else %}
            <p>No results found.</p>
        {% endif %}
    </form>
{% endblock %}
{% block headextra %}
<style type="text/css">
.result .date {
    color: #666666;
}
.result {
    margin: 10px 0;
}
.result p {
    margin: 0;
}
.result a {
    font-weight: bold;
}
.result .who {
    color: #482500;
    font-style: italic;
    padding-right: 6px;
}
.result .highlighted {
    background-color: yellow;
}
</style>
{% endblock headextra %}
